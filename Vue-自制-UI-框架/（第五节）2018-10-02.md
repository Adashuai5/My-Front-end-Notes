![](https://upload-images.jianshu.io/upload_images/7094266-891b9f773283eae7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

语言特性：深入了解
抽象知识：迭代了解
工具类：会用即可
----
####1. 用 solt 代替 写死的 “按钮”
```
<template>
    <button class="g-button">
        <slot></slot>
    </button>
</template>
```
####2. 引入 icon
用户自定义 icon 以及 方向

![第一个版本](https://upload-images.jianshu.io/upload_images/7094266-9600ab4fd09d74ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

![第一个版本](https://upload-images.jianshu.io/upload_images/7094266-9f5b13379d0e2280.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**第一个版本问题：有重复代码，为什么不好?以后更改代码容易忘记另一个。**

![第二版](https://upload-images.jianshu.io/upload_images/7094266-aa6068bf28dc93ca.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**1. :class="{[`icon-${iconPosition}`]:true}"**
![上面代码的意思](https://upload-images.jianshu.io/upload_images/7094266-3ebd1d6a359e25de.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**2. slot 不能直接加 class，因此用 div.content 包起来**

![](https://upload-images.jianshu.io/upload_images/7094266-228f15ac1ee0dae5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

**3. `inline-flex` bug**
```
display:inline-flex; // 会造成下列bug
```
![bug](https://upload-images.jianshu.io/upload_images/7094266-e820277fef3949a1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

解决方法：改变 [vertical-align](https://developer.mozilla.org/zh-CN/docs/Web/CSS/vertical-align) 的默认值：baseline
```
vertical-align: middle;
```
另外这里需要设置
```
.content {
            line-height: 1em;
        }
```
---
####3. props 另一种写法：默认就不会是 undifined 了

![](https://upload-images.jianshu.io/upload_images/7094266-50d62bca45cd81c9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
```
// props: [ 'icon', 'iconPosition' ]
props: {
      icon: {},
            iconPosition: {
            type: String,
            default: 'left'
      }
}
```
![](https://upload-images.jianshu.io/upload_images/7094266-bbc6b28c6011f9e3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
####4. 验证器 [validator](https://cn.vuejs.org/v2/guide/components-props.html#Prop-%E9%AA%8C%E8%AF%81) 和 webstorm 优化代码机制
```
// props 验证器
validator (value){
  if(value !== 'left' && value !== right){
    return false
  }else {
    return true
  }
}
```
![webstorm 优化代码机制](https://upload-images.jianshu.io/upload_images/7094266-963d94312aabd1ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
####5. 组件化 svg：icon.vue
```
<template>
    <svg class="g-icon">
        <use :xlink:href="`#i-${name}`"></use>
    </svg>
</template>
<script>
    export default {
        props:['name']
    }
</script>
<style lang="scss">
    .g-icon {
        width: 1em;
        height: 1em;
    }
</style>
```
使用 g-icon
```
<button class="g-button" :class="{[`icon-${iconPosition}`]: true}">
        <g-icon v-if="icon" :name="icon"></g-icon>
        <div class="content">
            <slot></slot>
        </div>
    </button>
```
注意
```
name="icon" // 字符串
:name="icon" // 这里 icon 变成了变量
```
####6. 引入 loading 状态
```
@click="x"

methods: {
  x(){this.$emit('click')}
}
```
上面代码可以写成下面
```
@click="$emit('click)"
```
`
svg 可以用 fill 变色
`
![](https://upload-images.jianshu.io/upload_images/7094266-7fbfcd6babd02ab6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
####7. 组合 button
```
<style lang="scss">
    .g-button-group {
        display: inline-flex;
        vertical-align: middle;
        > .g-button {
            border-radius: 0;
            &:not(:first-child) {
                border-left: none;
            };
            &:first-child {
                border-top-left-radius: var(--button-radius);
                border-bottom-left-radius: var(--button-radius);
            }
            &:last-child {
                border-top-right-radius: var(--button-radius);
                border-bottom-right-radius: var(--button-radius);
            }
        }
    }
</style>
```
上面通过 border-left:none 的方法有 bug

![](https://upload-images.jianshu.io/upload_images/7094266-e457c08e5d3e1f09.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

新方法
```
> .g-button {
  margin-left: -1px;
  &:hover{
    position: relative;
    z-index: 1;
}
```
引入 [mounted](https://cn.vuejs.org/v2/api/#mounted)
```
<script>
    export default {
        mounted(){
            for(let node of this.$el.children){
                let name = node.nodeName.toLowerCase()
                if( name !== 'button'){
                    console.warn(`g-button-group 的子元素应该均为 g-button ，而你的有 ${name}`)
                }
            }
        }
    }
</script>
```
作用是当开发者用 div 等包裹了 g-button，如下
```
<g-button-group>
        <div>
            <g-button icon="left" icon-position="left">上一页</g-button>
        </div>
        <g-button>更多</g-button>
        <g-button icon="right" icon-position="right">下一页</g-button>
    </g-button-group>
```
![则给警示](https://upload-images.jianshu.io/upload_images/7094266-18d243112ed44e81.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

####单元测试
